
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>最新 Java/Node.js/Spring/MySQL/数据库 技术博客 - 做最好的Java,Node.js,Bootstrap,DWZ,Git,GitHub,阿里云 技术交流开发博客</title>
<meta name="description" content="Java编程,Node.js Bootstrap Node Spring SpringMVC Struts1 Struts2 Webwork框架深入,Freemarker Velocity模板使用,XMLHTTP Ajax开发,Java Web开发,Java企业应用,Java设计模式,Java开源框架,Java应用服务器,Rich Client讨论,Ruby编程,Ruby DSL开发,Ruby on rails实践,JavaScript编程,敏捷软件开发XP TDD,软件配置管理,软件测试,项目管理UML,数据库,C#/.net C/C++ Erlang/FP PHP/Linux平台,精通Hibernate" />
<meta name="keywords"  content="Java编程 Node.js框架 Spring框架 Ajax技术 agile敏捷软件开发 ruby on rails实践 ITeye深度技术社区" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link rel="shortcut icon" href="http://anode.aliapp.com/favicon.png" />
<link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Lato:100,300,400,700,900,100italic,300italic,400italic,700italic,900italic" />
<link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Arizonia" />
<link rel="stylesheet" type="text/css" href="http://obullxl.github.io/public/css/bootstrap.css" media="screen" />
<link rel="stylesheet" type="text/css" href="http://obullxl.github.io/public/css/bootstrap-responsive.css" />
<link rel="stylesheet" type="text/css" href="http://obullxl.github.io/public/css/atom-front.css" />
<script type="text/javascript" charset="utf-8" src="http://obullxl.github.io/public/js/jquery-2.0.3.js"></script>
<script type="text/javascript" charset="utf-8" src="http://obullxl.github.io/public/js/bootstrap.js"></script>
<!--[if lt IE 9]>
	<script type="text/javascript" charset="utf-8" src="http://obullxl.github.io/public/js/html5shiv.js"></script>
<![endif]-->
</head>
<body>
	<div class="navbar navbar-inverse navbar-fixed-top">
		<div class="navbar-inner">
			<div class="container">
				<a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">Menu</a>
				<div class="nav-collapse">
					<ul class="nav">
						
							<li><a href="./index.html">首页</a></li>
						
						
						
							<li class="active"><a href="./index-blog.html">博客</a></li>
						
						
						
							<li><a href="./index-news.html">资讯</a></li>
						
						
						
							<li><a href="./index-album.html">图片</a></li>
						
					</ul>
					<ul class="nav pull-right">
						
							<li><a href="./index-about.html">关于</a></li>
						
					</ul>
				</div>
				<!--/.nav-collapse -->
			</div>
		</div>
	</div>
	<!-- /.navbar -->

<style type="text/css">
.radius-block:after {
	content: "发表评论";
}
</style>
<div class="blog">
	<div class="container">
		<div class="row">
			<div class="span8">
				<div class="entry-ads">
					<script type="text/javascript">
<!--
	google_ad_client = "ca-pub-2548953017344039";
	/* GitIO列表1-728W */
	google_ad_slot = "5847202679";
	google_ad_width = 728;
	google_ad_height = 90;
//-->
</script>
<script type="text/javascript" src="http://pagead2.googlesyndication.com/pagead/show_ads.js"></script>
				</div>
				<div class="entry">
					<h2>Android从SDCard中取得图片并设置为桌面背景 - 老牛啊</h2>
					<p class="meta">
						<i class="icon-calendar"></i> 2013-09-05
						- <i class="icon-user"></i> 老牛啊
						
					</p>
					<p>1、 把背景图片push到SDCard中adb push MM-320x480.png /sdcard/确认是否已经存在了，可以到SDCard看一下：adb shellcd sdcardls可以看到刚才上传的图片:2、编写Activity程序 public static final String TAG = &quot;WallpaperActivity&quot;; /** * 背景图片名称 */ private static f</p>
					<p>
						<div>1、 把背景图片push到SDCard中</div><div>adb push MM-320x480.png /sdcard/</div><div>确认是否已经存在了，可以到SDCard看一下：</div><div>adb shell</div><div>cd sdcard</div><div>ls</div><div>可以看到刚才上传的图片:</div><div><img src="http://pic002.cnblogs.com/images/2011/198133/2011060922382151.png" /></div><div>2、编写Activity程序</div><div align="left"><div style="background-color: #F5F5F5;border: 1px solid #CCCCCC;padding:10px;"><div><span style="color: #000000;">    </span><span style="color: #0000ff;">public</span><span style="color: #000000;"> </span><span style="color: #0000ff;">static</span><span style="color: #000000;"> </span><span style="color: #0000ff;">final</span><span style="color: #000000;"> String  TAG       </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #000000;">"</span><span style="color: #000000;">WallpaperActivity</span><span style="color: #000000;">"</span><span style="color: #000000;">;<br /><br />    </span><span style="color: #008000;">/**</span><span style="color: #008000;"><br />     * 背景图片名称<br />     </span><span style="color: #008000;">*/</span><span style="color: #000000;"><br />    </span><span style="color: #0000ff;">private</span><span style="color: #000000;"> </span><span style="color: #0000ff;">static</span><span style="color: #000000;"> </span><span style="color: #0000ff;">final</span><span style="color: #000000;"> String FILE_NAME </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #000000;">"</span><span style="color: #000000;">MM-320x480.png</span><span style="color: #000000;">"</span><span style="color: #000000;">;<br /><br />    </span><span style="color: #008000;">/**</span><span style="color: #008000;"> <br />     * </span><span style="color: #808080;">@see</span><span style="color: #008000;"> android.app.Activity#onCreate(android.os.Bundle)<br />     </span><span style="color: #008000;">*/</span><span style="color: #000000;"><br />    </span><span style="color: #0000ff;">public</span><span style="color: #000000;"> </span><span style="color: #0000ff;">void</span><span style="color: #000000;"> onCreate(Bundle cycle) {<br />        </span><span style="color: #0000ff;">super</span><span style="color: #000000;">.onCreate(cycle);<br />        </span><span style="color: #0000ff;">super</span><span style="color: #000000;">.setContentView(R.layout.wallpaper);<br />        <br />        </span><span style="color: #008000;">//</span><span style="color: #008000;"> 取得背景图片</span><span style="color: #008000;"><br /></span><span style="color: #000000;">        Bitmap wallpaper </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #0000ff;">this</span><span style="color: #000000;">.getWallpager();<br /><br />        </span><span style="color: #008000;">//</span><span style="color: #008000;"> 设置桌面背景</span><span style="color: #008000;"><br /></span><span style="color: #000000;">        </span><span style="color: #0000ff;">this</span><span style="color: #000000;">.putWallpaper(wallpaper);<br />    }<br /><br />    </span><span style="color: #008000;">/**</span><span style="color: #008000;"><br />     * 取得SDCard中的背景图片<br />     </span><span style="color: #008000;">*/</span><span style="color: #000000;"><br />    </span><span style="color: #0000ff;">private</span><span style="color: #000000;"> Bitmap getWallpager() {<br />        </span><span style="color: #008000;">//</span><span style="color: #008000;"> SDCard的路径，也就是&ldquo;/sdcard/&rdquo;</span><span style="color: #008000;"><br /></span><span style="color: #000000;">        File root </span><span style="color: #000000;">=</span><span style="color: #000000;"> Environment.getExternalStorageDirectory();<br />        </span><span style="color: #008000;">//</span><span style="color: #008000;"> MM图片</span><span style="color: #008000;"><br /></span><span style="color: #000000;">        File wall </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #0000ff;">new</span><span style="color: #000000;"> File(root, FILE_NAME);<br />        </span><span style="color: #008000;">//</span><span style="color: #008000;"> MM图片路径</span><span style="color: #008000;"><br /></span><span style="color: #000000;">        String path </span><span style="color: #000000;">=</span><span style="color: #000000;"> wall.getAbsolutePath();<br /><br />        Log.d(TAG, </span><span style="color: #000000;">"</span><span style="color: #000000;">MM文件路径为：</span><span style="color: #000000;">"</span><span style="color: #000000;"> </span><span style="color: #000000;">+</span><span style="color: #000000;"> path);<br /><br />        </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> BitmapFactory.decodeFile(path);<br />    }<br /><br />    </span><span style="color: #008000;">/**</span><span style="color: #008000;"><br />     * 设置桌面背景<br />     </span><span style="color: #008000;">*/</span><span style="color: #000000;"><br />    </span><span style="color: #0000ff;">private</span><span style="color: #000000;"> </span><span style="color: #0000ff;">void</span><span style="color: #000000;"> putWallpaper(Bitmap bitmap) {<br />        </span><span style="color: #0000ff;">try</span><span style="color: #000000;"> {<br />            WallpaperManager wallpaperManager </span><span style="color: #000000;">=</span><span style="color: #000000;"> WallpaperManager.getInstance(</span><span style="color: #0000ff;">this</span><span style="color: #000000;">);<br />            wallpaperManager.setBitmap(bitmap);<br />        } </span><span style="color: #0000ff;">catch</span><span style="color: #000000;"> (IOException e) {<br />            String msg </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #000000;">"</span><span style="color: #000000;">设置桌面背景发生异常:</span><span style="color: #000000;">"</span><span style="color: #000000;"> </span><span style="color: #000000;">+</span><span style="color: #000000;"> e.getLocalizedMessage();<br />            Log.e(TAG, </span><span style="color: #000000;">"</span><span style="color: #000000;">设置桌面背景发生异常！</span><span style="color: #000000;">"</span><span style="color: #000000;">, e);<br />            Toast.makeText(</span><span style="color: #0000ff;">this</span><span style="color: #000000;">, msg, Toast.LENGTH_LONG).show();<br />        }<br />    }</span></div></div></div><div>3、增加权限</div><div>&nbsp;&nbsp;&nbsp; 在AndroidManifest.xml文件中增加设置桌面背景权限：</div><div align="left"><div style="background-color: #F5F5F5;border: 1px solid #CCCCCC;padding:10px;"><div><span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> 设置桌面背景的权限 </span><span style="color: #008000;">--&gt;</span><span style="color: #000000;"><br />    </span><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">uses-permission </span><span style="color: #ff0000;">android:name</span><span style="color: #0000ff;">="android.permission.SET_WALLPAPER"</span><span style="color: #ff0000;"> </span><span style="color: #0000ff;">/&gt;</span></div></div></div><div>4、运行程序</div><div>&nbsp;&nbsp;&nbsp; 运行程序，再回到桌面，背景已经改变了。</div><img src="http://counter.cnblogs.com/blog/rss/2076900" width="1" height="1" alt=""/><br/><p>本文链接：<a href="http://www.cnblogs.com/obullxl/archive/2011/06/09/android-sdcard-image-wallpager.html" target="_blank">http://www.cnblogs.com/obullxl/archive/2011/06/09/android-sdcard-image-wallpager.html</a>，转载请注明。</p>
					</p>
				</div>
				<div class="entry-ads">
					<script type="text/javascript">
<!--
	google_ad_client = "ca-pub-2548953017344039";
	/* GitIO列表2-728W */
	google_ad_slot = "7323935870";
	google_ad_width = 728;
	google_ad_height = 90;
//-->
</script>
<script type="text/javascript" src="http://pagead2.googlesyndication.com/pagead/show_ads.js"></script>
				</div>
				
			</div>
			<div class="span4">
				<div class="sidebar">
	<div class="widget">
		<h3>推荐排行榜Top5</h3>
		<ul>
			
			<li><a href="./topic-blog-13.html" rel="bookmark">使用MySQL的LAST_INSERT_ID来确定各分表的唯一ID值 - 老牛啊</a></li>
			
			<li><a href="./topic-blog-17.html" rel="bookmark">Apache与Tomcat集群配置 - 老牛啊</a></li>
			
			<li><a href="./topic-blog-16.html" rel="bookmark">Android从SDCard中取得图片并设置为桌面背景 - 老牛啊</a></li>
			
			<li><a href="./topic-blog-15.html" rel="bookmark">Android动画之Frame动画实战 - 老牛啊</a></li>
			
			<li><a href="./topic-blog-14.html" rel="bookmark">Android动画之Tween动画实战 - 老牛啊</a></li>
			
		</ul>
	</div>
	<div class="widget-ads">
		<script type="text/javascript">
<!--
	google_ad_client = "ca-pub-2548953017344039";
	/* GitIO侧边栏-大幅 */
	google_ad_slot = "4370469471";
	google_ad_width = 300;
	google_ad_height = 600;
//-->
</script>
<script type="text/javascript" src="http://pagead2.googlesyndication.com/pagead/show_ads.js"></script>
	</div>
	<div class="widget">
		<h3>评论排行榜Top5</h3>
		<ul>
			
			<li><a href="./topic-blog-18.html" rel="bookmark">Android源码下载并在Eclipse中方便查看 - 老牛啊</a></li>
			
			<li><a href="./topic-blog-17.html" rel="bookmark">Apache与Tomcat集群配置 - 老牛啊</a></li>
			
			<li><a href="./topic-blog-16.html" rel="bookmark">Android从SDCard中取得图片并设置为桌面背景 - 老牛啊</a></li>
			
			<li><a href="./topic-blog-15.html" rel="bookmark">Android动画之Frame动画实战 - 老牛啊</a></li>
			
			<li><a href="./topic-blog-14.html" rel="bookmark">Android动画之Tween动画实战 - 老牛啊</a></li>
			
		</ul>
	</div>
</div>
			</div>
		</div>
	</div>
</div>
<script type="text/javascript">
	$(document).ready(function() {
		$("#ufrom").val(window.location.href);
	});
</script>
	<div class="footer">
		<div class="container">
			<div class="row">
				<div id="footer-copyright" class="span6">
					&copy; 2013 <a href="http://obullxl.github.io">obullxl@gmail.com</a>
				</div>
				<div id="footer-terms" class="span6">
					<a href="http://anode.aliapp.com">云博客</a>
					<a href="http://obullxl.cnblogs.com">博客园</a>
					<script type="text/javascript" src="http://js.tongji.linezing.com/3298180/tongji.js"></script><noscript><a href="http://www.linezing.com"><img src="http://img.tongji.linezing.com/3298180/tongji.gif"/></a></noscript>
				</div>
			</div>
		</div>
	</div>
	<!-- /footer -->
</body>
</html>